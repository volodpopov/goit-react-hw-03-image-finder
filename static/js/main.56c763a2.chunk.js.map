{"version":3,"sources":["components/ImageFinder/ImageFinder.module.css","components/ImageFinder/Searchbar.js","components/ImageFinder/ImageGalleryItem.js","components/ImageFinder/Modal.js","components/ImageFinder/Button.js","components/ImageFinder/services/pixabay-api.js","components/ImageFinder/ImageGallery.js","components/App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handelSubmit","onSubmit","props","preventDefault","trim","toast","error","this","className","s","SearchForm","type","SearchForm_button","SearchForm_button__label","SearchForm_input","name","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","hits","onClickGalleryItem","map","id","webformatURL","largeImageURL","tags","onClick","src","alt","ImageGalleryItem_image","modalRoot","document","querySelector","Modal","handleKeyDown","code","handleBackdropClick","target","window","addEventListener","removeEventListener","children","createPortal","Overlay","Button","loadMore","data-action","currentPage","fetch","then","res","json","ImageGallery","loading","showModal","imageForModal","title","getDataForGallery","prevState","pixabayApi","catch","finally","toggleModal","scrollPageToEnd","setTimeout","scrollBy","top","documentElement","scrollHeight","behavior","prevProps","color","height","width","length","App","handleSearchSubmit","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.56c763a2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"ImageFinder_App__2cYL6\",\"Searchbar\":\"ImageFinder_Searchbar__3_08R\",\"SearchForm\":\"ImageFinder_SearchForm__2SblK\",\"SearchForm_button\":\"ImageFinder_SearchForm_button__d0umI\",\"SearchForm_button__label\":\"ImageFinder_SearchForm_button__label__3I2fO\",\"SearchForm_input\":\"ImageFinder_SearchForm_input__1ld59\",\"ImageGallery\":\"ImageFinder_ImageGallery__t4xQo\",\"ImageGalleryItem\":\"ImageFinder_ImageGalleryItem__3701Q\",\"ImageGalleryItem_image\":\"ImageFinder_ImageGalleryItem_image__1D15E\",\"Overlay\":\"ImageFinder_Overlay__3Lt9p\",\"Modal\":\"ImageFinder_Modal__2kCdn\",\"Button\":\"ImageFinder_Button__1UFzX\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './ImageFinder.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleQueryChange = e => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n  handelSubmit = e => {\n    const { query } = this.state;\n    const { onSubmit } = this.props;\n\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Enter any word.');\n      return;\n    }\n    onSubmit(query);\n    this.setState({ query: '' });\n  };\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handelSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button__label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            name=\"query\"\n            value={query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageFinder.module.css';\n\nclass ImageGalleryItem extends Component {\n  render() {\n    const { hits, onClickGalleryItem } = this.props;\n\n    return hits.map(({ id, webformatURL, largeImageURL, tags }) => (\n      <li\n        key={id}\n        className={s.ImageGalleryItem}\n        onClick={() => onClickGalleryItem(largeImageURL, tags)}\n      >\n        <img\n          src={webformatURL}\n          alt={tags}\n          className={s.ImageGalleryItem_image}\n        />\n      </li>\n    ));\n  }\n}\nImageGalleryItem.propTypes = {\n  onClickGalleryItem: PropTypes.func.isRequired,\n  hits: PropTypes.array.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './ImageFinder.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = e => {\n    const { onClick } = this.props;\n\n    if (e.code === 'Escape') {\n      onClick();\n    }\n  };\n  handleBackdropClick = e => {\n    const { onClick } = this.props;\n\n    if (e.currentTarget === e.target) {\n      onClick();\n    }\n  };\n  render() {\n    const { children } = this.props;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.object.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageFinder.module.css';\n\nexport default class Button extends Component {\n  render() {\n    const { loadMore } = this.props;\n    return (\n      <button\n        type=\"button\"\n        className={s.Button}\n        data-action=\"load-more\"\n        onClick={loadMore}\n      >\n        Load more\n      </button>\n    );\n  }\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n","const fetchImage = (query, currentPage) => {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '18796683-6210221644807583f1ab11642';\n\n  return fetch(\n    `${BASE_URL}?q=${query}&page=${currentPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(res => res.json());\n};\n\nexport default { fetchImage };\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageFinder.module.css';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from 'react-loader-spinner';\nimport Modal from './Modal';\nimport Button from './Button';\nimport pixabayApi from './services/pixabay-api';\n\nclass ImageGallery extends Component {\n  state = {\n    hits: [],\n    loading: false,\n    currentPage: 1,\n    showModal: false,\n    imageForModal: '',\n    title: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.query !== this.props.query) {\n      this.setState(\n        () => {\n          return {\n            currentPage: 1,\n            hits: [],\n          };\n        },\n        () => {\n          this.getDataForGallery();\n        },\n      );\n    }\n  }\n\n  getDataForGallery = () => {\n    const { currentPage } = this.state;\n    const { query } = this.props;\n\n    this.setState(prevState => ({ loading: true, hits: prevState.hits }));\n    pixabayApi\n      .fetchImage(query, currentPage)\n      .then(({ hits }) => {\n        this.setState(prevState => ({\n          hits: [...prevState.hits, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  loadMore = () => {\n    this.getDataForGallery();\n    this.scrollPageToEnd();\n  };\n\n  scrollPageToEnd = () => {\n    setTimeout(() => {\n      window.scrollBy({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  onClickGalleryItem = (src, alt) => {\n    this.toggleModal();\n    this.setState({ imageForModal: src, title: alt });\n  };\n\n  render() {\n    const { loading, hits, imageForModal, title, showModal } = this.state;\n\n    return (\n      <div>\n        <ul className={s.ImageGallery}>\n          {hits && (\n            <ImageGalleryItem\n              hits={hits}\n              onClickGalleryItem={this.onClickGalleryItem}\n            />\n          )}\n        </ul>\n        {loading && (\n          <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\n        )}\n        {hits.length !== 0 && <Button loadMore={this.loadMore} />}\n        {showModal && (\n          <Modal onClick={this.onClickGalleryItem}>\n            <img src={imageForModal} alt={title} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string.isRequired,\n};\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Searchbar from './ImageFinder/Searchbar';\nimport ImageGallery from './ImageFinder/ImageGallery';\n\nimport s from './ImageFinder/ImageFinder.module.css';\n\nclass App extends Component {\n  state = {\n    query: null,\n  };\n\n  handleSearchSubmit = query => {\n    this.setState({ query });\n  };\n  render() {\n    const { query } = this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleSearchSubmit} />\n        <ImageGallery query={query} />\n        <ToastContainer position=\"top-center\" />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}